"use strict";let searchArray=[],favArray=[];function searchItem(e,a,r){this.showId=e,this.showName=a,this.showImage=r}function favItem(e,a,r,t,s){this.showId=e,this.showName=a,this.showImage=r,this.showAlt=t,this.showTitle=s}const btnSearch=document.querySelector(".js-searchBtn"),textAreaSearch=document.querySelector(".js-searchTextArea"),containerSearch=document.querySelector(".js-searchList");function handleSearch(){searchArray=[];const e=textAreaSearch.value;fetch("//api.tvmaze.com/search/shows?q="+e).then(e=>e.json()).then(e=>{for(let a=0;a<e.length;a++){const r=e[a].show.id,t=e[a].show.name,s=existMediumImg(e[a].show.image);searchArray.push(new searchItem(r,t,s))}paintSearch(),addFavEvent()})}function existMediumImg(e){if(null!==e&&null!==e.medium)return e.medium}function paintSearch(){let e="";for(let a=0;a<searchArray.length;a++)e+=`<li class="js-searchItem searchList__searchItem" data-id="${searchArray[a].showId}">`,e+=`<h3 class="js-searchItemTitle searchList__searchItem--title">${searchArray[a].showName}</h3>`,e+=`<img class="js-searchItemImg searchList__searchItem--img" src="${searchArray[a].showImage}" alt="Imagen del cartel de ${searchArray[a].showName}" title="Cartel de ${searchArray[a].showName}"/>`,e+="</li>",containerSearch.innerHTML=e}function addFavEvent(){const e=document.querySelectorAll(".js-searchItem");for(const a of e)a.addEventListener("click",handleFav)}function handleFav(e){const a=e.currentTarget.dataset.id,r=e.currentTarget.querySelector(".js-searchItemTitle"),t=e.currentTarget.querySelector(".js-searchItemImg");e.currentTarget.classList.contains("addFav")?(e.currentTarget.classList.remove("addFav"),favArray=favArray.filter(e=>e.showId!==a)):(e.currentTarget.classList.add("addFav"),favArray.push(new favItem(a,r.innerHTML,t.src,"Imagen del cartel de "+r.innerHTML,"Cartel de "+r.innerHTML)))}btnSearch.addEventListener("click",handleSearch);